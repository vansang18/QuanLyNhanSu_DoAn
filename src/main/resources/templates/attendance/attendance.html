<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách Nhân viên</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/attendance.css">
</head>
<body>

<!-- Include Header -->
<th:block th:replace="layout/header.html"></th:block>

<!-- Main Content -->
<div class="main">
    <!-- Include Sidebar -->
    <th:block th:replace="layout/sidebar.html"></th:block>

    <div class="content text-center">
        <h1>Chấm công cho tài khoản: <span sec:authentication="name"></span></h1>

        <!-- Nút Chấm Công -->
        <button class="btn btn-primary mt-3" onclick="openAttendanceModal()">
            <i class="fas fa-calendar-check"></i> Chấm Công
        </button>
    </div>
</div>

<!-- Popup Modal Chấm Công -->
<div id="attendanceModal" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered"> <!-- Thay modal-lg bằng modal-xl nếu cần lớn hơn -->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Quản Lý Điểm Danh</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="salary-section">
                    <h1 class="fw-bold">Quản Lý Điểm Danh</h1>
                    <button id="checkin-btn" class="btn btn-success mt-3">Điểm danh hôm nay</button>
                    <p class="mt-2">Tổng Số Ngày Điểm Danh</p>

                    <div class="form-group mb-3">
                        <label for="month">Tháng:</label>
                        <input type="number" id="month" class="form-control" placeholder="Nhập tháng (1-12)" min="1" max="12">
                    </div>
                    <div class="form-group mb-3">
                        <label for="year">Năm:</label>
                        <input type="number" id="year" class="form-control" placeholder="Nhập năm" value="2024">
                    </div>

                    <button id="get-summary-btn" class="btn btn-primary w-100">Xem Tổng Kết</button>

                    <div class="mt-4">
                        <p><strong>Tổng số ngày điểm danh trong tháng:</strong> <span id="monthly-count">0</span></p>
                        <p><strong>Tổng số ngày điểm danh trong năm:</strong> <span id="yearly-count">0</span></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/attendance.js"></script>

<script>
    // Mở modal chấm công
    function openAttendanceModal() {
        var modal = new bootstrap.Modal(document.getElementById('attendanceModal'));
        modal.show();
    }

    // Tính năng điểm danh
    document.getElementById('checkin-btn').onclick = function () {
        var status = document.getElementById('checkin-status');
        status.textContent = 'Điểm danh thành công!';
        status.classList.remove('text-danger');
        status.classList.add('text-success');

        // Không đóng modal tự động, chỉ hiển thị thông báo
    };

    // Tính năng xem tổng kết
    document.getElementById('get-summary-btn').onclick = function () {
        var month = document.getElementById('month').value;
        var year = document.getElementById('year').value;

        if (month >= 1 && month <= 12 && year > 2000) {
            document.getElementById('monthly-count').textContent = Math.floor(Math.random() * 30);
            document.getElementById('yearly-count').textContent = Math.floor(Math.random() * 365);
        } else {
            alert('Vui lòng nhập tháng và năm hợp lệ!');

        }
    };
</script>
</body>
</html>
